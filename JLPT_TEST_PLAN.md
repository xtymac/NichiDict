# JLPT级别标签功能 - 测试计划

## 📋 测试概述

**测试目标**：验证JLPT级别标签在搜索结果和词条详情页的正确显示

**涉及功能**：
- 数据库JLPT级别数据导入
- 搜索结果页JLPT标签显示
- 词条详情页JLPT标签显示
- 标签颜色编码正确性

---

## 🎯 测试前准备

### 1. 重新编译App
```bash
# 在Xcode中
Product → Clean Build Folder (⇧⌘K)
Product → Build (⌘B)
```

### 2. 运行App
- 选择模拟器或真机
- Product → Run (⌘R)

---

## ✅ 测试用例

### 测试组 A：基础显示测试

#### A1. N5级别词条（绿色标签）

**测试词汇**：
- `食べる` (たべる) - 吃
- `行く` (いく) - 去
- `見る` (みる) - 看
- `本` (ほん) - 书
- `水` (みず) - 水

**预期结果**：
- ✅ 搜索结果：词条旁边显示绿色 "N5" 标签
- ✅ 详情页：在"頻度"信息下方显示绿色 "N5" 标签
- ✅ 标签文字为白色，背景为绿色
- ✅ 标签大小和位置合理，不遮挡其他信息

**测试步骤**：
1. 在搜索框输入 `食べる`
2. 检查搜索结果中是否显示绿色N5标签
3. 点击进入词条详情页
4. 滚动查看是否在频度信息下方显示N5标签
5. 重复测试其他N5词汇

---

#### A2. N4级别词条（蓝色标签）

**测试词汇**：
- `大切` (たいせつ) - 重要
- `計画` (けいかく) - 计划
- `約束` (やくそく) - 约定

**预期结果**：
- ✅ 标签颜色为蓝色
- ✅ 显示 "N4" 文字

---

#### A3. N3级别词条（橙色标签）

**测试词汇**：
- `改善` (かいぜん) - 改善
- `経験` (けいけん) - 经验
- `条件` (じょうけん) - 条件

**预期结果**：
- ✅ 标签颜色为橙色
- ✅ 显示 "N3" 文字

---

#### A4. N2级别词条（紫色标签）

**测试词汇**：
- `抽象` (ちゅうしょう) - 抽象
- `概念` (がいねん) - 概念
- `傾向` (けいこう) - 倾向

**预期结果**：
- ✅ 标签颜色为紫色
- ✅ 显示 "N2" 文字

---

#### A5. N1级别词条（红色标签）

**测试词汇**：
- `曖昧` (あいまい) - 暧昧
- `顕著` (けんちょ) - 显著
- `妥当` (だとう) - 妥当

**预期结果**：
- ✅ 标签颜色为红色
- ✅ 显示 "N1" 文字

---

### 测试组 B：无JLPT级别词条

#### B1. 不在JLPT列表的词条

**测试词汇**：
- 专业术语
- 非常罕见的词汇
- 最新的外来语

**预期结果**：
- ✅ 不显示任何JLPT标签
- ✅ 界面布局正常，没有空白占位
- ✅ 其他信息（頻度、アクセント等）正常显示

**测试步骤**：
1. 搜索一个不太常见的专业词汇
2. 确认搜索结果中没有JLPT标签
3. 进入详情页确认没有JLPT标签行
4. 确认界面布局流畅自然

---

### 测试组 C：UI/UX体验测试

#### C1. 搜索结果列表显示

**测试场景**：搜索返回多个结果

**测试步骤**：
1. 搜索 `食べ` （会返回多个相关词条）
2. 观察列表中的JLPT标签

**预期结果**：
- ✅ 标签不会影响词条名称的可读性
- ✅ 标签大小适中，不过大或过小
- ✅ 标签位置在词条名称右侧，对齐合理
- ✅ 不同级别的标签颜色区分明显
- ✅ 列表滚动流畅，标签不闪烁

---

#### C2. 词条详情页显示

**测试步骤**：
1. 进入任意有JLPT级别的词条
2. 观察详情页JLPT标签

**预期结果**：
- ✅ 标签位置在"頻度"下方，"意味"分隔线上方
- ✅ 标签与其他元素的间距合理
- ✅ 标签文字清晰可读
- ✅ 标签背景色与白色文字对比度足够
- ✅ 标签圆角适中，视觉美观

---

#### C3. 响应式布局

**测试设备**：
- iPhone SE (小屏)
- iPhone 15 Pro (标准屏)
- iPhone 15 Pro Max (大屏)
- iPad (平板)

**测试步骤**：
1. 在不同设备上运行app
2. 测试搜索结果和详情页

**预期结果**：
- ✅ 标签在所有屏幕尺寸上显示正常
- ✅ 文字大小在小屏设备上仍然可读
- ✅ 布局不会因标签而错位

---

### 测试组 D：语言本地化测试

#### D1. 中文系统

**测试步骤**：
1. 设置系统语言为中文
2. 搜索词条

**预期结果**：
- ✅ JLPT标签显示为 "N5", "N4" 等（英文级别代码）
- ✅ "JLPT" 标签前缀显示
- ✅ 其他中文界面正常显示

---

#### D2. 英文系统

**测试步骤**：
1. 设置系统语言为English
2. 搜索词条

**预期结果**：
- ✅ JLPT标签显示正常
- ✅ 英文界面正常显示

---

### 测试组 E：数据准确性测试

#### E1. 核心词汇JLPT级别验证

**验证列表**：
| 词汇 | 预期JLPT级别 | 实际显示 | 结果 |
|------|-------------|----------|------|
| 食べる | N5 | | ⬜ |
| 行く | N5 | | ⬜ |
| 本 | N5 | | ⬜ |
| 計画 | N4 | | ⬜ |
| 経験 | N3 | | ⬜ |
| 概念 | N2 | | ⬜ |
| 曖昧 | N1 | | ⬜ |

**测试步骤**：
1. 依次搜索每个词汇
2. 记录实际显示的JLPT级别
3. 对比预期级别

---

#### E2. 数据库覆盖率检查

**验证方式**：
```bash
# 在终端运行
cd "/Users/mac/Maku Box Dropbox/Maku Box/Project/NichiDict/NichiDict/Resources"
sqlite3 seed.sqlite "SELECT jlpt_level, COUNT(*) FROM dictionary_entries WHERE jlpt_level IS NOT NULL GROUP BY jlpt_level ORDER BY jlpt_level;"
```

**预期结果**：
```
N1|4888
N2|2904
N3|4386
N4|1446
N5|1734
```

---

### 测试组 F：性能测试

#### F1. 搜索性能

**测试步骤**：
1. 清空搜索框
2. 输入常用词（如 `食べる`）
3. 观察搜索结果显示速度

**预期结果**：
- ✅ 搜索响应时间不受JLPT标签影响
- ✅ 标签加载无延迟
- ✅ 列表滚动流畅

---

#### F2. 内存使用

**测试步骤**：
1. 在Xcode中查看Debug Navigator
2. 进行多次搜索
3. 浏览多个词条详情页

**预期结果**：
- ✅ 内存使用无异常增长
- ✅ 无内存泄漏警告

---

## 🐛 Bug记录模板

发现问题时，请记录：

```
Bug ID: JLPT-001
严重程度: [Critical / High / Medium / Low]
测试用例: [测试用例编号]
测试词汇: [具体词汇]
系统语言: [中文/English]
设备: [设备型号]

问题描述:
[详细描述问题]

复现步骤:
1. ...
2. ...
3. ...

预期结果:
[应该如何显示]

实际结果:
[实际如何显示]

截图:
[附上截图]
```

---

## 📊 测试结果汇总

### 测试统计
- 总测试用例数：
- 通过数：
- 失败数：
- 阻塞数：

### 核心功能验证
- [ ] N5标签显示正确（绿色）
- [ ] N4标签显示正确（蓝色）
- [ ] N3标签显示正确（橙色）
- [ ] N2标签显示正确（紫色）
- [ ] N1标签显示正确（红色）
- [ ] 无JLPT词条不显示标签
- [ ] 搜索结果列表显示正常
- [ ] 词条详情页显示正常
- [ ] 多设备适配正常
- [ ] 中英文系统兼容

---

## 🎬 快速测试指南（5分钟版）

如果时间有限，执行这个快速测试：

1. **编译运行** (1分钟)
   - Clean build
   - Run on simulator

2. **基础显示** (2分钟)
   - 搜索 `食べる` → 检查绿色N5标签
   - 进入详情页 → 检查JLPT标签位置和颜色
   - 搜索 `曖昧` → 检查红色N1标签

3. **边界情况** (1分钟)
   - 搜索一个罕见词 → 检查无标签的布局

4. **多词条列表** (1分钟)
   - 搜索 `食べ` → 检查列表中多个标签的显示

✅ **如果以上都通过，核心功能正常**

---

## 📝 下一步计划

测试通过后：
1. ✅ 基于JLPT级别优化例句生成策略
   - 优先为N5-N3词条生成例句
   - N4-N1可选择性生成
2. ✅ 考虑添加JLPT级别筛选功能
   - 用户可按JLPT级别筛选词汇
3. ✅ 添加学习进度追踪（可选）
   - 跟踪用户已学习的JLPT词汇

---

**测试开始时间**：___________
**测试完成时间**：___________
**测试人员**：___________
**测试结论**：[ Pass / Fail / Blocked ]
