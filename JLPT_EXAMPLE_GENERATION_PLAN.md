# 基于JLPT难度的例句生成计划

## 📊 当前例句覆盖情况

### JLPT词条例句统计

| JLPT级别 | 词条数 | sense总数 | 有例句 | 无例句 | 覆盖率 |
|----------|--------|-----------|--------|--------|--------|
| **N5** 🟢 | 1,734 | 4,996 | 126 | **4,870** | 2.5% |
| **N4** 🔵 | 1,446 | 3,642 | 71 | **3,571** | 1.9% |
| **N3** 🟠 | 4,386 | 9,704 | 118 | **9,586** | 1.2% |
| **N2** 🟣 | 2,904 | 5,044 | 86 | **4,958** | 1.7% |
| **N1** 🔴 | 4,888 | 8,050 | 141 | **7,909** | 1.8% |
| **无JLPT** | 412,102 | 462,048 | 5,893 | **456,155** | 1.3% |
| **总计** | 427,460 | 493,484 | 6,435 | **487,049** | 1.3% |

### 关键发现

- ✅ 已有例句：**28,200条**（包括AI生成的2,850条）
- ⚠️ JLPT词条覆盖率极低：**1.2-2.5%**
- 🎯 **需要优先为JLPT词条生成例句**
- 📈 无JLPT词条的例句最多（27,132条），但覆盖率也很低

---

## 🎯 生成策略

### 方案对比

#### 方案A：按难度优先级生成（推荐）⭐

**优势**：
- ✅ 用户学习路径清晰（N5→N4→N3→N2→N1）
- ✅ 例句难度匹配用户水平
- ✅ 短期内快速提升核心词汇的可用性
- ✅ 成本可控，可分阶段实施

**策略**：
1. **第一优先**：N5 (4,870 senses) - 最基础，最常用
2. **第二优先**：N4 (3,571 senses) - 初级必备
3. **第三优先**：N3 (9,586 senses) - 中级进阶
4. **第四优先**：N2 (4,958 senses) - 中高级
5. **第五优先**：N1 (7,909 senses) - 高级
6. **最后**：无JLPT (456,155 senses) - 选择性生成

---

#### 方案B：全量并行生成

**优势**：
- ✅ 一次性完成所有JLPT词条
- ✅ 不需要分阶段

**劣势**：
- ❌ 成本较高（~$7 USD）
- ❌ 时间较长（~10小时）
- ❌ 无优先级区分

---

### 推荐方案：A - 分阶段生成 ⭐

---

## 📋 详细执行计划

### 阶段1：N5基础词汇（最高优先级）🟢

**目标**：为所有N5词条生成例句

**数据**：
- 需要生成的sense数：**4,870**
- 每个sense生成：**2条例句**（基础词汇，2条足够）
- 预计生成例句数：**9,740条**

**难度要求**：
- 句子长度：15-25字符
- 语法：N5-N4级别
- 词汇：日常生活场景
- 示例：
  - ❌ 不推荐："この本を読むことによって、知識が増えるだろう"
  - ✅ 推荐："この本を読みます" / "その本はおもしろいです"

**成本估算**：
```
输入：~4,870 senses × 150 tokens = 730,500 tokens
输出：~9,740 examples × 150 tokens = 1,461,000 tokens
总计：~2,191,500 tokens

使用 GPT-4o-mini:
输入：$0.150 / 1M tokens × 0.73M = $0.11
输出：$0.600 / 1M tokens × 1.46M = $0.88
总成本：约 $0.99 USD
```

**预计时间**：约2-3小时

**优先级**：🔥 立即执行

---

### 阶段2：N4初级词汇 🔵

**目标**：为所有N4词条生成例句

**数据**：
- 需要生成的sense数：**3,571**
- 每个sense生成：**2条例句**
- 预计生成例句数：**7,142条**

**难度要求**：
- 句子长度：20-30字符
- 语法：N4-N3级别
- 词汇：日常交流、工作场景

**成本估算**：约 **$0.73 USD**

**预计时间**：约2小时

**优先级**：🔥 高

---

### 阶段3：N3中级词汇 🟠

**目标**：为所有N3词条生成例句

**数据**：
- 需要生成的sense数：**9,586**
- 每个sense生成：**2条例句**
- 预计生成例句数：**19,172条**

**难度要求**：
- 句子长度：25-35字符
- 语法：N3-N2级别
- 词汇：新闻、文章、专业场景

**成本估算**：约 **$1.96 USD**

**预计时间**：约5小时

**优先级**：🟡 中

---

### 阶段4：N2中高级词汇 🟣

**目标**：为所有N2词条生成例句

**数据**：
- 需要生成的sense数：**4,958**
- 每个sense生成：**2条例句**
- 预计生成例句数：**9,916条**

**难度要求**：
- 句子长度：30-40字符
- 语法：N2-N1级别
- 词汇：学术、商务、文学场景

**成本估算**：约 **$1.01 USD**

**预计时间**：约3小时

**优先级**：🟡 中低

---

### 阶段5：N1高级词汇 🔴

**目标**：为所有N1词条生成例句

**数据**：
- 需要生成的sense数：**7,909**
- 每个sense生成：**2条例句**
- 预计生成例句数：**15,818条**

**难度要求**：
- 句子长度：35-50字符
- 语法：N1级别
- 词汇：专业、学术、复杂文学场景

**成本估算**：约 **$1.62 USD**

**预计时间**：约4小时

**优先级**：🟢 低

---

## 💰 总成本和时间估算

### 按阶段累计

| 阶段 | JLPT级别 | sense数 | 例句数 | 成本 | 时间 | 累计成本 | 累计时间 |
|------|----------|---------|--------|------|------|----------|----------|
| 1 | N5 🟢 | 4,870 | 9,740 | $0.99 | 2.5h | $0.99 | 2.5h |
| 2 | N4 🔵 | 3,571 | 7,142 | $0.73 | 2h | $1.72 | 4.5h |
| 3 | N3 🟠 | 9,586 | 19,172 | $1.96 | 5h | $3.68 | 9.5h |
| 4 | N2 🟣 | 4,958 | 9,916 | $1.01 | 3h | $4.69 | 12.5h |
| 5 | N1 🔴 | 7,909 | 15,818 | $1.62 | 4h | $6.31 | 16.5h |

### 关键里程碑

- **1小时后**：完成40%的N5词汇 ✅
- **2.5小时后**：完成全部N5词汇 🎯
- **4.5小时后**：完成N5+N4 🎯
- **9.5小时后**：完成N5+N4+N3（覆盖60%的JLPT词汇）🎯
- **16.5小时后**：完成全部JLPT词汇 🏆

---

## 🚀 立即执行方案

### 选项1：仅N5（推荐新手用户）⭐

**成本**：$0.99 USD
**时间**：2.5小时
**覆盖**：1,734个最常用词条
**适用场景**：快速上线，给新手用户最佳体验

```bash
python3 generate_examples_by_jlpt.py --level N5 --examples-per-sense 2
```

---

### 选项2：N5+N4（推荐初学者）⭐⭐

**成本**：$1.72 USD
**时间**：4.5小时
**覆盖**：3,180个基础词条
**适用场景**：覆盖初级学习者所有需求

```bash
python3 generate_examples_by_jlpt.py --levels N5,N4 --examples-per-sense 2
```

---

### 选项3：N5+N4+N3（推荐中级学习者）⭐⭐⭐

**成本**：$3.68 USD
**时间**：9.5小时
**覆盖**：7,566个词条（60%的JLPT词汇）
**适用场景**：覆盖绝大多数学习者需求

```bash
python3 generate_examples_by_jlpt.py --levels N5,N4,N3 --examples-per-sense 2
```

---

### 选项4：全部JLPT（完整版）⭐⭐⭐⭐

**成本**：$6.31 USD
**时间**：16.5小时
**覆盖**：15,358个所有JLPT词条
**适用场景**：专业应用，完整覆盖

```bash
python3 generate_examples_by_jlpt.py --levels N5,N4,N3,N2,N1 --examples-per-sense 2
```

---

## 🛠️ 技术实现

### 脚本功能需求

```python
# generate_examples_by_jlpt.py

功能：
1. 按JLPT级别筛选需要生成例句的sense
2. 根据JLPT级别调整例句难度
3. 批量调用GPT-4o-mini生成例句
4. 实时显示进度和预估时间
5. 自动保存到数据库
6. 支持断点续传

参数：
--levels: JLPT级别（如：N5,N4,N3）
--examples-per-sense: 每个sense生成几条例句（默认2）
--batch-size: 批次大小（默认50）
--model: 使用的模型（默认gpt-4o-mini）

难度映射：
N5: 句子15-25字符，N5-N4语法
N4: 句子20-30字符，N4-N3语法
N3: 句子25-35字符，N3-N2语法
N2: 句子30-40字符，N2-N1语法
N1: 句子35-50字符，N1语法
```

---

## 📊 质量控制

### 例句质量标准

**N5级别示例**：
```
词汇：食べる (たべる) - 吃

✅ 好例句：
1. 朝ごはんを食べます (15字符，N5语法)
   中：吃早餐
   英：I eat breakfast

2. りんごを食べました (17字符，N5语法)
   中：吃了苹果
   英：I ate an apple

❌ 差例句：
1. 健康のために毎日野菜を食べることにしています (35字符，太复杂)
2. 食べる (只有单词本身，没有语境)
```

**N3级别示例**：
```
词汇：改善 (かいぜん) - 改善

✅ 好例句：
1. サービスの質を改善するために、お客様の意見を聞いています (30字符)
   中：为了改善服务质量，我们倾听客户意见
   英：We listen to customer feedback to improve service quality

2. 健康状態が改善されました (28字符)
   中：健康状况得到了改善
   英：My health condition has improved
```

---

## 🎯 推荐执行顺序

### 今天（推荐）

1. ✅ **执行阶段1：N5基础词汇**
   - 成本：$0.99
   - 时间：2.5小时
   - 立即提升核心用户体验

### 本周内

2. ✅ **执行阶段2：N4初级词汇**
   - 成本：+$0.73 = $1.72
   - 时间：+2h = 4.5小时
   - 覆盖初级学习者

### 未来（可选）

3. 🔄 **执行阶段3：N3中级词汇**（根据需求决定）
4. 🔄 **执行阶段4-5：N2-N1**（专业用户需求）

---

## 📝 执行检查清单

### 开始前
- [ ] 确认OpenAI API密钥有效
- [ ] 检查API配额是否充足
- [ ] 备份当前数据库
- [ ] 关闭其他生成脚本

### 执行中
- [ ] 监控生成进度
- [ ] 检查例句质量（抽样）
- [ ] 观察成本消耗
- [ ] 记录任何错误

### 完成后
- [ ] 验证数据库数据
- [ ] 测试app中的例句显示
- [ ] 记录实际成本和时间
- [ ] 规划下一阶段

---

## 🤔 决策建议

### 如果你是：

**快速上线用户** → 选择**选项1（仅N5）**
- 最低成本
- 最快完成
- 覆盖最常用词汇

**注重用户体验** → 选择**选项2（N5+N4）**
- 性价比最高
- 覆盖初级学习者
- 4.5小时可完成

**追求完整性** → 选择**选项3（N5+N4+N3）**
- 覆盖60%的JLPT词汇
- 成本适中（$3.68）
- 满足大多数用户需求

**专业应用** → 选择**选项4（全部JLPT）**
- 完整覆盖
- 专业完整度
- 一次投入长期受益

---

## 🎬 立即开始

**我的推荐**：从**N5**开始

理由：
1. ✅ 成本最低（$0.99）
2. ✅ 风险最小（2.5小时）
3. ✅ 效果最明显（最常用词汇）
4. ✅ 可随时扩展

**现在就开始吗？** 👇

```bash
# 开始生成N5例句
cd /Users/mac/Maku\ Box\ Dropbox/Maku\ Box/Project/NichiDict/scripts
python3 generate_examples_by_jlpt.py --level N5 --examples-per-sense 2
```

---

**创建时间**：2025-10-27
**最后更新**：2025-10-27
