# NichiDict App 测试指南

## 🎯 App功能说明

NichiDict是一个**日文词典App**，帮助用户查询日文单词的含义。

### 搜索方向
```
日文输入 → 英文定义 + 中文翻译
   ✅          ✅         ✅
```

**支持的输入格式**：
- ✅ 日文汉字：`食べる`、`学校`、`午後`
- ✅ 平假名：`たべる`、`がっこう`、`ごご`
- ✅ 罗马字：`taberu`、`gakkou`、`gogo`

**不支持的输入**：
- ❌ 中文词：`吃`、`学校`、`下午`（这些是翻译结果，不是搜索输入）
- ❌ 英文词：`eat`、`school`、`afternoon`

---

## ✅ 正确的测试方法

### 测试1: 基础词汇（有中文翻译）

在App中依次输入以下**日文词汇**：

| 输入（日文） | 预期结果 |
|-------------|---------|
| `食べる` | ✓ 显示结果，包含中文：喫; 食; 召; 頂 |
| `たべる` | ✓ 显示结果（同上）|
| `taberu` | ✓ 显示结果（同上）|
| `今日` | ✓ 显示结果，包含中文：今天 |
| `学校` | ✓ 显示结果，包含中文：学校; 學校 |
| `午後` | ✓ 显示结果，包含中文：下午 |
| `勉強` | ✓ 显示结果，包含中文：学习 |

### 测试2: 验证中文翻译显示

1. **搜索**：输入 `食べる`
2. **点击**：点击搜索结果进入详情页
3. **查看**：定义部分应该显示：
   ```
   Ichidan verb, transitive verb

   1. to eat
      喫; 食; 召; 頂    ← 中文翻译在这里

   2. to live on (e.g. a salary)
      喫; 食; 召; 頂    ← 中文翻译在这里
   ```

### 测试3: 无中文翻译的词条

有些词条可能没有中文翻译（覆盖率约2%），这是正常的：

| 输入（日文） | 预期结果 |
|-------------|---------|
| `コンピュータ` | ✓ 显示结果，但可能无中文翻译 |
| `メール` | ✓ 显示结果，但可能无中文翻译 |

**显示效果**：
```
noun

1. computer
   （无中文翻译）    ← 这是正常的，不是bug
```

### 测试4: 搜索排序

测试精确匹配优先：

| 输入 | 第一个结果应该是 | 说明 |
|------|----------------|------|
| `食べる` | `食べる` | 不是 `食べるラー油` |
| `日本` | `日本` | 不是 `日本中` |
| `学校` | `学校` | 不是 `学校祭` |

### 测试5: 无结果状态

输入**不存在的日文词**（或中文词）：

| 输入 | 预期结果 |
|------|---------|
| `asdfgh` | ✓ 显示"未找到本地词条" + AI按钮 |
| `中午` | ✓ 显示"未找到本地词条" + AI按钮 |
| `组织` | ✓ 显示"未找到本地词条" + AI按钮 |

**关键检查点**：
- ✅ 搜索栏保持在顶部（不居中）
- ✅ 下方显示"未找到本地词条"
- ✅ 显示"用 AI 解说/翻译"按钮
- ✅ 可以滚动查看内容

---

## 📋 完整测试清单

### 基础功能测试

- [ ] **初始界面**
  - [ ] 显示搜索框
  - [ ] 显示引导文字"开始搜索"
  - [ ] 搜索框居中显示

- [ ] **搜索功能**
  - [ ] 输入日文汉字可搜索
  - [ ] 输入平假名可搜索
  - [ ] 输入罗马字可搜索
  - [ ] 实时搜索（输入时自动搜索）
  - [ ] 显示加载指示器

- [ ] **搜索结果**
  - [ ] 显示单词的汉字写法
  - [ ] 显示平假名读音
  - [ ] 显示英文定义
  - [ ] 点击进入详情页

- [ ] **详情页**
  - [ ] 显示完整的读音（平假名+罗马字）
  - [ ] 显示所有定义
  - [ ] 显示中文翻译（如果有）
  - [ ] 显示词性标签
  - [ ] 显示频率信息（如果有）

- [ ] **无结果状态**
  - [ ] 搜索栏保持在顶部
  - [ ] 显示"未找到本地词条"
  - [ ] 显示AI翻译按钮
  - [ ] 内容可滚动

### 中文翻译测试

- [ ] **有中文翻译的词**
  - [ ] 食べる → 显示中文
  - [ ] 今日 → 显示中文
  - [ ] 学校 → 显示中文
  - [ ] 午後 → 显示中文
  - [ ] 勉強 → 显示中文

- [ ] **中文显示位置**
  - [ ] 中文在英文定义下方
  - [ ] 中文有适当缩进
  - [ ] 中文字体清晰可读

- [ ] **语言切换**（可选）
  - [ ] 简体中文系统：显示简体
  - [ ] 繁体中文系统：优先繁体

### UI/UX测试

- [ ] **搜索栏行为**
  - [ ] 初始状态：居中
  - [ ] 输入后：固定在顶部
  - [ ] 有结果：保持在顶部
  - [ ] 无结果：保持在顶部（不回到中央）

- [ ] **流畅度**
  - [ ] 输入流畅无卡顿
  - [ ] 搜索结果加载快速
  - [ ] 页面切换动画流畅

- [ ] **多语言支持**
  - [ ] 界面文字正确显示
  - [ ] 中英文混合显示正常

---

## 🔍 测试用例示例

### 用例1: 成功查询并查看中文翻译

**步骤**：
1. 打开App
2. 在搜索框输入：`食べる`
3. 等待搜索结果
4. 点击第一个结果
5. 滚动查看详情

**预期结果**：
- ✅ 显示"食べる (たべる)"
- ✅ 显示罗马字"taberu"
- ✅ 显示定义"to eat"
- ✅ 显示中文"喫; 食; 召; 頂"
- ✅ 中文在英文下方，有缩进

### 用例2: 测试搜索栏固定

**步骤**：
1. 打开App（搜索框居中）
2. 输入：`asdfgh`（不存在的词）
3. 等待搜索完成

**预期结果**：
- ✅ 搜索框保持在顶部（不回到中央）
- ✅ 下方显示"未找到本地词条"
- ✅ 显示放大镜图标
- ✅ 显示AI按钮

### 用例3: 测试精确匹配优先

**步骤**：
1. 清空搜索框
2. 输入：`食べる`
3. 查看搜索结果列表

**预期结果**：
- ✅ 第一个结果是"食べる"
- ✅ 不是"食べるラー油"或其他复合词
- ✅ 精确匹配排在最前面

### 用例4: 测试中文输入（预期无结果）

**步骤**：
1. 清空搜索框
2. 输入：`中午`（这是中文，不是日文）
3. 等待搜索完成

**预期结果**：
- ✅ 显示"未找到本地词条"
- ✅ 这是预期行为（App不支持中文→日文查询）
- ✅ 可以点击AI按钮获取翻译

---

## ❓ 常见问题

### Q1: 为什么输入"中午"没有结果？

**A**: NichiDict是日文词典，只支持**日文→中文/英文**的查询方向。

- ❌ 错误用法：输入中文词"中午"查找日文
- ✅ 正确用法：输入日文词"午後"查看中文翻译"下午"

### Q2: 为什么有些词没有中文翻译？

**A**: 中文翻译覆盖率约2%（4,349 / 213,730词条）。

- 覆盖的主要是：常用词、JLPT词汇、高频词
- 未覆盖：专业术语、外来语、罕见词

这是正常的，可以通过以下方式改进：
1. 导入更多中文词典源
2. 使用AI翻译补充（仅限无本地匹配时）

### Q3: 中文翻译显示的是简体还是繁体？

**A**: 根据系统语言自动选择：

- **简体中文**用户（zh-Hans、zh-CN）：显示简体
- **繁体中文**用户（zh-Hant、zh-TW、zh-HK）：优先繁体，无则简体

### Q4: 如何测试AI翻译功能？

**A**:
1. 输入不存在的词或中文词（如"中午"）
2. 等待显示"未找到本地词条"
3. 点击"用 AI 解说/翻译"按钮
4. 等待AI处理（需要配置LLM API）

---

## 🎯 推荐测试流程

### 快速测试（5分钟）

```
1. 打开App
2. 测试基础搜索：
   - 输入：食べる
   - 输入：たべる
   - 输入：taberu
3. 点击结果查看详情
4. 确认中文翻译显示
5. 测试无结果：输入 asdfgh
6. 确认搜索栏保持在顶部
```

### 完整测试（20分钟）

```
1. 基础功能测试（见上方清单）
2. 中文翻译测试（10个常用词）
3. UI/UX测试（搜索栏位置）
4. 边界情况测试
5. 多语言测试（切换系统语言）
```

---

## 📊 测试结果记录模板

```markdown
## 测试日期：2025-XX-XX
## 测试人员：
## App版本：

### 基础功能
- [ ] 搜索功能正常
- [ ] 详情页正常
- [ ] 中文翻译显示正常

### 发现的问题
1. [问题描述]
   - 重现步骤：
   - 预期结果：
   - 实际结果：
   - 严重程度：

### 测试通过率
- 通过：XX / YY
- 失败：XX / YY
```

---

## 🔗 相关文档

- [TESTING_CHINESE_TRANSLATIONS.md](TESTING_CHINESE_TRANSLATIONS.md) - 数据库测试指南
- [CHINESE_TRANSLATION_REPORT.md](CHINESE_TRANSLATION_REPORT.md) - 实现报告
- [UI_IMPROVEMENT_SEARCH_LAYOUT.md](UI_IMPROVEMENT_SEARCH_LAYOUT.md) - UI改进说明

---

**祝测试顺利！** 🎉

如有问题，请参考上述文档或查看数据库中的实际数据。
